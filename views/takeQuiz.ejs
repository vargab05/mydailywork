<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= quiz.title %></title>
    <link rel="stylesheet" href="/css/takequiz.css">
</head>
<body>
    <div class="container">
    <div class="header">
        <nav>
            <img src="/images/quizlogo4.png"/>
            <ul class="top-menu">
                <li><a href="/home">HOME</a></li>
                <li><a href="#">ABOUT</a></li>
                <li><a href="/contact">CONTACT</a></li>
                <li><a href="/logout">LOGOUT</a></li>
            </ul>
        </nav>
    </div>
    <div class="main">

    <p><span>Quiz Title: </span><%= quiz.title %></p>

    <form id="quiz-form" action="/submit-quiz/<%= quiz._id %>" method="POST">
        <% quiz.questions.forEach(function(question, qIndex) { %>
            <div class="question-container" id="question-<%= qIndex %>">
                <h3><%= qIndex + 1 %>. <%= question.questionText %></h3>

                <% question.options.forEach(function(option, oIndex) { %>
                    <div class="options">
                    <input type="radio" name="answers[<%= qIndex %>]" value="<%= oIndex %>" required>
                    <label><%= option.text %></label></div>
                <% }); %>
            </div>
        <% }); %>

        <div class="buttons">
        <button type="button" class="btn" id="prev-btn">Previous</button>
        <button type="button" class="btn" id="next-btn">Next</button>
        <button type="submit" class="btn" id="submit-btn">Submit</button>
        </div>
    </form>
</div>
</div>

    <script>
        let currentQuestionIndex = 0;
        const totalQuestions = <%= quiz.questions.length %>;

        const questionContainers = document.querySelectorAll('.question-container');
        const prevBtn = document.getElementById('prev-btn');
        const nextBtn = document.getElementById('next-btn');
        const submitBtn = document.getElementById('submit-btn');

        questionContainers[currentQuestionIndex].classList.add('active');

        function updateQuestionDisplay() {
            questionContainers.forEach((container, index) => {
                container.classList.remove('active');
                if (index === currentQuestionIndex) {
                    container.classList.add('active');
                }
            });

            if (currentQuestionIndex === 0) {
                prevBtn.style.display = 'none';
                nextBtn.style.display = 'inline';
                submitBtn.style.display = 'none';
            } else if (currentQuestionIndex === totalQuestions - 1) {
                nextBtn.style.display = 'none';
                submitBtn.style.display = 'inline';
                prevBtn.style.display = 'inline';
            } else {
                prevBtn.style.display = 'inline';
                nextBtn.style.display = 'inline';
                submitBtn.style.display = 'none';
            }
        }

        nextBtn.addEventListener('click', function() {
            if (currentQuestionIndex < totalQuestions - 1) {
                currentQuestionIndex++;
                updateQuestionDisplay();
            }
        });

        prevBtn.addEventListener('click', function() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                updateQuestionDisplay();
            }
        });

        updateQuestionDisplay();
    </script>
</body>
</html>